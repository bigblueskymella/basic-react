import React, { useState, useRef } from 'react'
import Header from './component/Header'
import Editor from './component/Editor'
import List from './component/List'
import './App.css'

const mockTodo = [
  {
    id: 0,
    isDone: false,
    content: "React ê³µë¶€í•˜ê¸°",
    createdDate: new Date().toLocaleDateString(),
  },
  {
    id: 1,
    isDone: false,
    content: "ë¹¨ë˜ ë„ê¸°",
    createdDate: new Date().toLocaleDateString(),
  },
  {
    id: 2,
    isDone: false,
    content: "ì¤„ë„˜ê¸° í•˜ê¸°",
    createdDate: new Date().toLocaleDateString(),
  },
];

const App = () => {
  const [todo, setTodo]=useState(mockTodo)
  const idRef = useRef(3)
// ì‚¬ìš©ìê°€ ì‘ì„±í•œ í•  ì¼ ë°›ì•„ ë§¤ê°œë³€ìˆ˜contentì— ì €ì¥
  const onCreate = (content)=>{
    const newItem = {
      id:idRef.current,
      isDone:false,
      content,
      createdDate:new Date().toLocaleDateString(),
    }
    setTodo([newItem, ...todo])
    idRef.current+=1;
  }

  // targetId ì–´ë–¤ê±¸ ì„ íƒí–ˆëŠ”ë° ë„˜ê²¨ë°›ìŒ
  const onUpdate = (targetId) => {
    // setTodo(
    //   todo.map(
    //     (item)=>{
    //       if(item.id === targetId){
    //         return {
    //           ...item,
    //           isDone: !item.isDone,
    //         }
    //       }else{
    //         return item;
    //       }
    //     }
    //   )
    // )
    setTodo(todo.map((item)=>item.id===targetId?{...item, isDone:!item.isDone} : item))
  }

  const onDelete = (targetId) => {
    setTodo(todo.filter((it)=>it.id !== targetId))
  }

  return (
    <div className='App'>
      <Header/>
      <Editor onCreate={onCreate}/>
      {/* 3ï¸âƒ£todoë°°ì—´ì„ propsë¡œ ì „ë‹¬ */}
      <List todo={todo} onUpdate={onUpdate} onDelete={onDelete}/>
    </div>
  )
}

export default App

// ë³´í†µ ë¦¬ìŠ¤íŠ¸ í˜•íƒœì˜ ë°ì´í„° ì €ì¥í•  ë•Œ ë°°ì—´ ì´ìš©
// ê¸°ì´ˆë°ì´í„° [ë¹ˆ]ë°°ì—´, ë°ì´í„°ë² ì´ìŠ¤ ì—­í•  ìˆ˜í–‰

ğŸŸ¡
.App {
  /* text-align: center; */
  max-width: 600px;
  border: 1px solid lightgray;
  margin: 10px auto;
  padding: 20px;
  box-sizing: border-box;
  /* ìš”ì†Œ í¬ê¸° ì–´ë–¤ ê²ƒì„ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°í• ì§€ ì •í•˜ëŠ” ì†ì„±. 
  ë‚´ë¶€ ì—¬ë°±ì´ ìš”ì†Œì˜ í¬ê¸°ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ ì„¤ì •. */

  display: flex;
  flex-direction: column;
}
